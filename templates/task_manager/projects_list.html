{% extends 'base.html' %}
{% block content %}

  <div class="progress" role="progressbar" aria-label="Warning example"
       aria-valuenow="{{ percent_projects_completed }}" aria-valuemin="0"
       aria-valuemax="100">
    <div class="progress-bar bg-warning text-dark"
         style="width: {{ percent_tasks_completed }}%"> {{ percent_projects_completed|floatformat:"0" }}%
      PROJECTS COMPLETED
    </div>
  </div>

  <table class="table">
    <thead>
    <tr class="text-uppercase">
      <th scope="col"></th>
      <th scope="col">Project</th>
      <th scope="col">Is complete</th>
      <th scope="col">Tasks</th>
      <th scope="col">Deadline</th>
      <th scope="col">Priority</th>
      <th scope="col">Delete project</th>
    </tr>
    </thead>
    <tbody>
    {% for project in project_list %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td>{{ project.name }}</td>
        <td>
          {% if project.is_complete %}
            <i class="bi bi-toggle-on"></i>
          {% else %}
            <i class="bi bi-toggle2-off" style="color: #4F6175;"></i>
          {% endif %}
        </td>
        <td>
          {% for task in project.tasks.all %}
            <div><i class="bi bi-circle-fill"></i> {{ task.name }}</div>
          {% endfor %}
        </td>
        <td>
          {% for task in project.tasks.all %}
            <div>{{ task.deadline }}</div>
          {% endfor %}
        </td>
        <td>
          {% for task in project.tasks.all %}
            <div>{{ task.priority }}</div>
          {% endfor %}
        </td>
        <td>
          <div><i class="bi bi-trash3-fill"></i></div>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}
